(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[39],{7635:(e,t,s)=>{Promise.resolve().then(s.bind(s,8764))},6046:(e,t,s)=>{"use strict";var r=s(6658);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},3198:(e,t,s)=>{"use strict";s.d(t,{y:()=>o});let r="http://43.201.218.199",a=()=>{let e=localStorage.getItem("accessToken");return{"Content-Type":"application/json",Accept:"application/json",...e&&{Authorization:"Bearer ".concat(e)}}},o=()=>{let e=async e=>{let t=e.headers.get("content-type"),s=null==t?void 0:t.includes("application/json"),r=s?await e.json():await e.text();if(!e.ok)throw{message:s?r.message:"An error occurred",status:e.status,errors:r.errors};return r};return{get:async t=>{try{let s=await fetch("".concat(r).concat(t),{method:"GET",headers:a(),credentials:"same-origin",mode:"cors",cache:"no-store"});return e(s)}catch(e){throw n(e)}},post:async(t,s)=>{try{let o=await fetch("".concat(r).concat(t),{method:"POST",headers:a(),credentials:"same-origin",mode:"cors",body:s?JSON.stringify(s):void 0});return e(o)}catch(e){throw n(e)}},put:async(t,s)=>{try{let o=await fetch("".concat(r).concat(t),{method:"PUT",headers:a(),credentials:"same-origin",mode:"cors",body:s?JSON.stringify(s):void 0});return e(o)}catch(e){throw n(e)}},delete:async t=>{try{let s=await fetch("".concat(r).concat(t),{method:"DELETE",headers:a(),credentials:"same-origin",mode:"cors"});return e(s)}catch(e){throw n(e)}}}},n=e=>{if(e instanceof TypeError&&"Failed to fetch"===e.message)throw Error("Network error occurred. Please check your connection.");if("status"in e)switch(e.status){case 401:throw localStorage.removeItem("token"),Error("Authentication failed. Please login again.");case 403:throw Error("You do not have permission to perform this action.");case 404:throw Error("The requested resource was not found.");case 422:throw Error(e.errors?Object.values(e.errors).flat().join(", "):e.message);default:throw Error(e.message||"An unexpected error occurred.")}throw e}},9258:(e,t,s)=>{"use strict";s.d(t,{R:()=>a});let r=(0,s(3198).y)(),a={getEmployeeList:async()=>await r.get("/employee"),getEmployee:async e=>await r.get("/employee/".concat(e)),updateEmployee:async(e,t)=>await r.put("/employee/edit/".concat(e),t),deleteEmployee:async e=>await r.delete("/employee/".concat(e))}},8764:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(5155),a=s(8750),o=s(6307),n=s(6046),i=s(2115);function l(){let{id:e}=(0,n.useParams)(),t=(0,n.useRouter)(),{data:s,isLoading:l}=(0,a.uC)(e),[u,c]=(0,i.useState)({username:"",email:"",firstName:"",lastName:"",street:"",housenumber:"",zipcode:0,city:"",country:"",role:""}),[m,d]=(0,i.useState)(""),[h,b]=(0,i.useState)(!s||(0,o.A)(s.email)),[p,x]=(0,i.useState)(!1),f=(0,i.useRef)(null);(0,i.useEffect)(()=>{s&&c(s)},[s]),(0,i.useEffect)(()=>{b((0,o.A)(u.email))},[u.email]);let y=(0,a.Sf)(e),g=async s=>{if(s.preventDefault(),!h){d("Please enter a valid email");return}try{y.mutate(u),t.push("/employee/".concat(e))}catch(e){return d("Failed to update employee"),e}};(0,i.useEffect)(()=>{document.activeElement===f.current?u.email&&(b((0,o.A)(u.email)),x(!0)):x(!1)},[u.email,p]);let w=e=>{let{name:t,value:s}=e.target;c(e=>({...e,[t]:"zipcode"===t?Number(s):s}))};return l?(0,r.jsx)("div",{children:"Loading..."}):(0,r.jsx)("div",{className:"flex items-center justify-center p-12",children:(0,r.jsxs)("div",{className:"mx-auto w-full max-w-[550px]",children:[m&&(0,r.jsxs)("div",{className:"mb-3 bg-red-100 border-t border-b border-red-500 text-red-700 px-4 py-3",role:"alert",children:[(0,r.jsx)("p",{className:"font-bold",children:"Error : please try again!"}),(0,r.jsx)("p",{className:"text-sm",children:m})]}),(0,r.jsxs)("form",{onSubmit:g,children:[(0,r.jsxs)("h3",{className:"max-w-full truncate mb-8 block text-2xl font-medium text-[#07074D]",children:["Edit Employee: ",null==s?void 0:s.firstName," ",null==s?void 0:s.lastName]}),(0,r.jsxs)("label",{className:"mb-3 block text-base font-medium text-[#07074D]",htmlFor:"username",children:["Username*",(0,r.jsxs)("span",{className:"text-gray-400",children:[" ","only for User not for Employee"]})]}),(0,r.jsx)("input",{className:"w-full mb-5 rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#60a5fa] focus:shadow-md",type:"text",name:"username",value:u.username,onChange:w}),(0,r.jsx)("br",{}),(0,r.jsx)("label",{className:"mb-3 block text-base font-medium text-[#07074D]",htmlFor:"email",children:"Email*"}),!h&&p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{ref:f,className:"w-full mb-5 rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-red-500 focus:shadow-md",type:"email",name:"email",value:u.email,onChange:w}),(0,r.jsxs)("div",{className:"mb-3 bg-red-100 border-t border-b border-red-500 text-red-700 px-4 py-3",role:"alert",children:[(0,r.jsx)("p",{className:"font-bold",children:"Invalid Email"}),(0,r.jsx)("p",{className:"text-sm",children:"Please use valid Email"})]})]}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("input",{ref:f,className:"w-full mb-5 rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#60a5fa] focus:shadow-md",type:"email",name:"email",value:u.email,onChange:w})}),(0,r.jsx)("br",{}),(0,r.jsx)("label",{className:"mb-3 block text-base font-medium text-[#07074D]",htmlFor:"firstName",children:"First Name*"}),(0,r.jsx)("input",{className:"w-full mb-5 rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#60a5fa] focus:shadow-md",type:"text",name:"firstName",value:u.firstName,onChange:w}),(0,r.jsx)("br",{}),(0,r.jsx)("label",{className:"mb-3 block text-base font-medium text-[#07074D]",htmlFor:"lastName",children:"Last Name*"}),(0,r.jsx)("input",{className:"w-full mb-5 rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#60a5fa] focus:shadow-md",type:"text",name:"lastName",value:u.lastName,onChange:w}),(0,r.jsx)("br",{}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"mb-3 block text-base font-medium text-[#07074D]",children:"Address"}),(0,r.jsxs)("div",{className:"grid grid-cols-4",children:[(0,r.jsxs)("div",{className:"col-span-3",children:[(0,r.jsx)("label",{className:"mb-3 block text-base font-medium text-[#07074D]",htmlFor:"street",children:"Street"}),(0,r.jsx)("input",{className:"w-full mb-5 rounded-md border border-[#e0e0e0] bg-white py-1 px-3 text-base font-medium text-[#6B7280] outline-none focus:border-[#60a5fa] focus:shadow-md",type:"text",name:"street",value:u.street,onChange:w}),(0,r.jsx)("br",{})]}),(0,r.jsxs)("div",{className:"ml-5",children:[(0,r.jsx)("label",{className:"mb-3 block text-base font-medium text-[#07074D]",htmlFor:"housenumber",children:"Nr"}),(0,r.jsx)("input",{className:"w-full mb-5 rounded-md border border-[#e0e0e0] bg-white py-1 px-3  text-base font-medium text-[#6B7280] outline-none focus:border-[#60a5fa] focus:shadow-md",type:"text",name:"housenumber",value:u.housenumber,onChange:w}),(0,r.jsx)("br",{})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2",children:[(0,r.jsxs)("div",{className:"mr-5",children:[(0,r.jsx)("label",{className:"mb-3 block text-base font-medium text-[#07074D]",htmlFor:"zipcode",children:"PLZ"}),(0,r.jsx)("input",{className:"w-full mb-5 rounded-md border border-[#e0e0e0] bg-white py-1 px-3 text-base font-medium text-[#6B7280] outline-none focus:border-[#60a5fa] focus:shadow-md",type:"number",name:"zipcode",value:u.zipcode,onChange:w}),(0,r.jsx)("br",{})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"mb-3 block text-base font-medium text-[#07074D]",htmlFor:"city",children:"Ort"}),(0,r.jsx)("input",{className:"w-full mb-5 rounded-md border border-[#e0e0e0] bg-white py-1 px-3  text-base font-medium text-[#6B7280] outline-none focus:border-[#60a5fa] focus:shadow-md",type:"text",name:"city",value:u.city,onChange:w}),(0,r.jsx)("br",{})]})]}),(0,r.jsx)("label",{className:"mb-3 block text-base font-medium text-[#07074D]",htmlFor:"country",children:"Land"}),(0,r.jsx)("input",{className:"w-full mb-5 rounded-md border border-[#e0e0e0] bg-white py-1 px-3  text-base font-medium text-[#6B7280] outline-none focus:border-[#60a5fa] focus:shadow-md",type:"text",name:"country",value:u.country,onChange:w})]}),(0,r.jsx)("label",{className:"mb-3 block text-base font-medium text-[#07074D]",htmlFor:"role",children:"Role*"}),(0,r.jsx)("input",{className:"w-full mb-5 rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#60a5fa] focus:shadow-md",type:"text",name:"role",value:u.role,onChange:w}),(0,r.jsx)("br",{}),(0,r.jsx)("h3",{className:"mb-8 block text-base font-medium text-gray-500",children:"* required"}),(0,r.jsx)("button",{className:"hover:shadow-form rounded-md bg-blue-500 hover:bg-blue-400 py-3 px-8 text-base font-semibold text-white outline-none",type:"submit",children:"Edit this Employee"})]})]})})}},8750:(e,t,s)=>{"use strict";s.d(t,{Sf:()=>l,WE:()=>u,uC:()=>i});var r=s(547),a=s(5906),o=s(5848),n=s(9258);let i=e=>(0,r.I)({queryKey:["employee",e],queryFn:()=>n.R.getEmployee(e),enabled:!!e,staleTime:0}),l=e=>{let t=(0,a.jE)();return(0,o.n)({mutationFn:t=>n.R.updateEmployee(e,t),onSuccess:()=>{t.invalidateQueries({queryKey:["employee",e]}),t.invalidateQueries({queryKey:["employees"]})}})},u=e=>{let t=(0,a.jE)();return(0,o.n)({mutationFn:()=>n.R.deleteEmployee(e),onSuccess:()=>{t.invalidateQueries({queryKey:["employee",e]}),t.invalidateQueries({queryKey:["employees"]})}})}},6307:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=e=>!!String(e).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)},5848:(e,t,s)=>{"use strict";s.d(t,{n:()=>m});var r=s(2115),a=s(1049),o=s(5586),n=s(9323),i=s(4403),l=class extends n.Q{#e;#t=void 0;#s;#r;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,i.f8)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,i.EN)(t.mutationKey)!==(0,i.EN)(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(e){this.#a(),this.#o(e)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#a(),this.#o()}mutate(e,t){return this.#r=t,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(e)}#a(){let e=this.#s?.state??(0,a.$)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#o(e){o.j.batch(()=>{if(this.#r&&this.hasListeners()){let t=this.#t.variables,s=this.#t.context;e?.type==="success"?(this.#r.onSuccess?.(e.data,t,s),this.#r.onSettled?.(e.data,null,t,s)):e?.type==="error"&&(this.#r.onError?.(e.error,t,s),this.#r.onSettled?.(void 0,e.error,t,s))}this.listeners.forEach(e=>{e(this.#t)})})}},u=s(5906),c=s(6373);function m(e,t){let s=(0,u.jE)(t),[a]=r.useState(()=>new l(s,e));r.useEffect(()=>{a.setOptions(e)},[a,e]);let n=r.useSyncExternalStore(r.useCallback(e=>a.subscribe(o.j.batchCalls(e)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),i=r.useCallback((e,t)=>{a.mutate(e,t).catch(c.l)},[a]);if(n.error&&(0,c.G)(a.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:i,mutateAsync:n.mutate}}}},e=>{var t=t=>e(e.s=t);e.O(0,[306,547,441,517,358],()=>t(7635)),_N_E=e.O()}]);