(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[708],{4224:(e,t,s)=>{Promise.resolve().then(s.bind(s,7393))},6046:(e,t,s)=>{"use strict";var r=s(6658);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},3198:(e,t,s)=>{"use strict";s.d(t,{y:()=>a});let r="http://43.201.218.199",n=()=>{let e=localStorage.getItem("accessToken");return{"Content-Type":"application/json",Accept:"application/json",...e&&{Authorization:"Bearer ".concat(e)}}},a=()=>{let e=async e=>{let t=e.headers.get("content-type"),s=null==t?void 0:t.includes("application/json"),r=s?await e.json():await e.text();if(!e.ok)throw{message:s?r.message:"An error occurred",status:e.status,errors:r.errors};return r};return{get:async t=>{try{let s=await fetch("".concat(r).concat(t),{method:"GET",headers:n(),credentials:"same-origin",mode:"cors",cache:"no-store"});return e(s)}catch(e){throw i(e)}},post:async(t,s)=>{try{let a=await fetch("".concat(r).concat(t),{method:"POST",headers:n(),credentials:"same-origin",mode:"cors",body:s?JSON.stringify(s):void 0});return e(a)}catch(e){throw i(e)}},put:async(t,s)=>{try{let a=await fetch("".concat(r).concat(t),{method:"PUT",headers:n(),credentials:"same-origin",mode:"cors",body:s?JSON.stringify(s):void 0});return e(a)}catch(e){throw i(e)}},delete:async t=>{try{let s=await fetch("".concat(r).concat(t),{method:"DELETE",headers:n(),credentials:"same-origin",mode:"cors"});return e(s)}catch(e){throw i(e)}}}},i=e=>{if(e instanceof TypeError&&"Failed to fetch"===e.message)throw Error("Network error occurred. Please check your connection.");if("status"in e)switch(e.status){case 401:throw localStorage.removeItem("token"),Error("Authentication failed. Please login again.");case 403:throw Error("You do not have permission to perform this action.");case 404:throw Error("The requested resource was not found.");case 422:throw Error(e.errors?Object.values(e.errors).flat().join(", "):e.message);default:throw Error(e.message||"An unexpected error occurred.")}throw e}},9258:(e,t,s)=>{"use strict";s.d(t,{R:()=>n});let r=(0,s(3198).y)(),n={getEmployeeList:async()=>await r.get("/employee"),getEmployee:async e=>await r.get("/employee/".concat(e)),updateEmployee:async(e,t)=>await r.put("/employee/edit/".concat(e),t),deleteEmployee:async e=>await r.delete("/employee/".concat(e))}},7393:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var r=s(5155),n=s(6046),a=s(2115);function i(e){let{isOpen:t,onClose:s,onConfirm:n,isPending:a}=e;return t?(0,r.jsx)("div",{className:"fixed inset-0 w-full h-screen flex justify-center items-center bg-gray-400 bg-opacity-50",children:(0,r.jsxs)("div",{className:"relative p-5 bg-white",children:[(0,r.jsx)("h3",{className:"mb-8 block text-2xl font-medium text-[#07074D]",children:"Are you Sure?"}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("button",{className:"mx-5 rounded-md bg-blue-500 hover:bg-blue-400 max-w-sm w-full py-3 px-5 mb-5 text-sm font-semibold text-white outline-none",onClick:s,disabled:a,children:"No, I do not want to Delete"}),(0,r.jsx)("button",{className:"mx-5 rounded-md bg-red-500 hover:bg-red-400 max-w-sm w-full py-3 px-5 mb-5 text-sm font-semibold text-white outline-none",onClick:n,disabled:a,children:a?"Deleting...":"Yes, I want to Delete"})]})]})}):null}function o(e){let{employee:t,onEdit:s,onDelete:n}=e;return(0,r.jsx)("div",{className:"mx-auto w-full max-w-[550px] h-auto rounded-xl bg-white shadow-lg",children:(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("div",{className:"grid grid-cols-4 p-5",children:[(0,r.jsxs)("div",{className:"grid grid-rows-6 mr-5 min-w-min",children:[(0,r.jsx)("div",{className:"text-sm font-bold",children:"Full Name"}),(0,r.jsx)("div",{className:"text-sm font-bold",children:"Email"}),(0,r.jsx)("div",{className:"text-sm font-bold row-span-2",children:"Address"}),(0,r.jsx)("div",{className:"text-sm font-bold",children:"Role"})]}),(0,r.jsxs)("div",{className:"grid grid-rows-6 col-span-3",children:[(0,r.jsxs)("div",{className:"truncate",children:[t.firstName," ",t.lastName]}),(0,r.jsx)("div",{className:"truncate",children:t.email}),(0,r.jsxs)("div",{className:"truncate",children:[t.housenumber,", ",t.street]}),(0,r.jsxs)("div",{className:"truncate",children:[t.zipcode,", ",t.city,", ",t.country]}),(0,r.jsx)("div",{className:"truncate",children:t.role})]})]}),(0,r.jsxs)("div",{className:"flex flex-row items-center justify-center",children:[(0,r.jsx)("button",{onClick:s,className:"flex justify-center mx-5 rounded-md bg-blue-500 hover:bg-blue-400 max-w-sm w-full py-3 px-5 mb-5 text-sm font-semibold text-white outline-none",children:"Edit"}),(0,r.jsx)("button",{onClick:n,className:"mx-5 rounded-md bg-red-500 hover:bg-red-400 max-w-sm w-full py-3 px-5 mb-5 text-sm font-semibold text-white outline-none",children:"Delete"})]})]})})}var l=s(8750);function c(e){let{comments:t,onSubmitComment:s}=e,[n,i]=(0,a.useState)("");return(0,r.jsxs)("div",{className:"mx-auto w-full max-w-[550px] h-auto rounded-xl bg-white shadow-lg mt-10 p-5",children:[(0,r.jsx)("h3",{className:"text-xs font-semibold uppercase text-gray-400 mb-1",children:"Comments"}),(0,r.jsx)("div",{className:"divide-y divide-gray-200",children:null==t?void 0:t.map((e,t)=>(0,r.jsxs)("div",{className:"grid grid-cols-3",children:[(0,r.jsx)("div",{className:"text-2xl col-span-2 break-all py-5",children:e.text}),(0,r.jsxs)("div",{className:"flex flex-col py-5 pl-10",children:[(0,r.jsx)("div",{className:"text-base font-semibold",children:e.author}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:new Date(e.createdAt).toLocaleString()})]})]},t))}),(0,r.jsxs)("div",{children:[(0,r.jsx)("hr",{className:"bg-gray-700 my-5"}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s(n),i("")},children:[(0,r.jsx)("label",{className:"mb-3 block text-base font-medium text-[#07074D]",htmlFor:"comment",children:"New Comment"}),(0,r.jsx)("textarea",{className:"w-full mb-5 rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#60a5fa] focus:shadow-md",name:"comment",value:n,onChange:e=>i(e.target.value)}),(0,r.jsx)("button",{className:"hover:shadow-form rounded-md bg-blue-500 hover:bg-blue-400 py-3 px-8 text-base font-semibold text-white outline-none",type:"submit",children:"Write Comment"})]})]})]})}let u=(0,s(3198).y)(),d={createComment:async e=>await u.post("/comment",e)};var m=s(5906),h=s(5848);let x=()=>{let e=(0,m.jE)(),{id:t}=(0,n.useParams)();return(0,h.n)({mutationFn:async e=>(await d.createComment(e)).data,onSuccess:()=>{e.invalidateQueries({queryKey:["employee",t]})},onError:e=>{console.error("Error creating comment:",e)}})};var p=s(6060);function y(){let{id:e}=(0,n.useParams)(),t=(0,n.useRouter)(),{user:s}=(0,p.A)(),[u,d]=(0,a.useState)(!1),{data:m,isLoading:h,isError:y}=(0,l.uC)(e),b=x(),f=(0,l.WE)(e),g=async()=>{try{await f.mutateAsync(),t.push("/employee")}catch(e){console.error("Error deleting employee:",e)}};return h?(0,r.jsx)("div",{children:"Loading..."}):y?(0,r.jsx)("div",{children:"User not found"}):(0,r.jsxs)("div",{className:"p-10 h-auto w-screen flex flex-col items-center bg-gray-100",children:[(0,r.jsxs)("h3",{className:"truncate text-3xl font-bold mb-5 max-w-[550px]",children:["Profile of ",null==m?void 0:m.firstName," ",null==m?void 0:m.lastName]}),m?(0,r.jsx)(o,{employee:m,onEdit:()=>t.push("/employee/edit/".concat(e)),onDelete:()=>d(!0)}):(0,r.jsx)(r.Fragment,{}),(0,r.jsx)(c,{comments:null==m?void 0:m.comments,onSubmitComment:e=>{b.mutate({text:e,username:m.username,author:s.username}),t.refresh()},isSubmitting:b.isPending}),(0,r.jsx)(i,{isOpen:u,onClose:()=>d(!1),onConfirm:g,isPending:f.isPending})]})}},6060:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var r=s(2115),n=s(3391),a=s(6344);let i=()=>{let e=(0,n.wA)(),{isAuthenticated:t,token:s,user:i}=(0,n.d4)(e=>e.auth);return(0,r.useEffect)(()=>{e((0,a.T5)())},[e]),{isAuthenticated:t,token:s,user:i}}},8750:(e,t,s)=>{"use strict";s.d(t,{Sf:()=>l,WE:()=>c,uC:()=>o});var r=s(547),n=s(5906),a=s(5848),i=s(9258);let o=e=>(0,r.I)({queryKey:["employee",e],queryFn:()=>i.R.getEmployee(e),enabled:!!e,staleTime:0}),l=e=>{let t=(0,n.jE)();return(0,a.n)({mutationFn:t=>i.R.updateEmployee(e,t),onSuccess:()=>{t.invalidateQueries({queryKey:["employee",e]}),t.invalidateQueries({queryKey:["employees"]})}})},c=e=>{let t=(0,n.jE)();return(0,a.n)({mutationFn:()=>i.R.deleteEmployee(e),onSuccess:()=>{t.invalidateQueries({queryKey:["employee",e]}),t.invalidateQueries({queryKey:["employees"]})}})}},6344:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>u,LA:()=>o,T5:()=>c,ri:()=>l});var r=s(8943),n=s(720);let a={token:(0,n.Lg)("accessToken"),isAuthenticated:!!(0,n.Lg)("accessToken"),user:null},i=(0,r.Z0)({name:"auth",initialState:a,reducers:{setCredentials:(e,t)=>{let{user:s,token:r}=t.payload;e.user=s,e.token=r,e.isAuthenticated=!0,(0,n.ZB)("accessToken",r),(0,n.ZB)("user",JSON.stringify(s))},logout:e=>{e.user=null,e.token=null,e.isAuthenticated=!1,(0,n.$1)("accessToken"),(0,n.$1)("user")},checkAuth:e=>{let t=(0,n.Lg)("accessToken"),s=JSON.parse((0,n.Lg)("user")||"null");e.isAuthenticated=!!t,e.user=s,e.token=t}}}),{setCredentials:o,logout:l,checkAuth:c}=i.actions,u=i.reducer},720:(e,t,s)=>{"use strict";s.d(t,{$1:()=>a,Lg:()=>r,ZB:()=>n});let r=e=>localStorage.getItem(e),n=(e,t)=>{localStorage.setItem(e,t)},a=e=>{localStorage.removeItem(e)}},5848:(e,t,s)=>{"use strict";s.d(t,{n:()=>d});var r=s(2115),n=s(1049),a=s(5586),i=s(9323),o=s(4403),l=class extends i.Q{#e;#t=void 0;#s;#r;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,o.f8)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,o.EN)(t.mutationKey)!==(0,o.EN)(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(e){this.#n(),this.#a(e)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#n(),this.#a()}mutate(e,t){return this.#r=t,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(e)}#n(){let e=this.#s?.state??(0,n.$)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#a(e){a.j.batch(()=>{if(this.#r&&this.hasListeners()){let t=this.#t.variables,s=this.#t.context;e?.type==="success"?(this.#r.onSuccess?.(e.data,t,s),this.#r.onSettled?.(e.data,null,t,s)):e?.type==="error"&&(this.#r.onError?.(e.error,t,s),this.#r.onSettled?.(void 0,e.error,t,s))}this.listeners.forEach(e=>{e(this.#t)})})}},c=s(5906),u=s(6373);function d(e,t){let s=(0,c.jE)(t),[n]=r.useState(()=>new l(s,e));r.useEffect(()=>{n.setOptions(e)},[n,e]);let i=r.useSyncExternalStore(r.useCallback(e=>n.subscribe(a.j.batchCalls(e)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),o=r.useCallback((e,t)=>{n.mutate(e,t).catch(u.l)},[n]);if(i.error&&(0,u.G)(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:o,mutateAsync:i.mutate}}}},e=>{var t=t=>e(e.s=t);e.O(0,[306,505,547,441,517,358],()=>t(4224)),_N_E=e.O()}]);